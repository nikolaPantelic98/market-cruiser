<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <head th:replace="fragments :: page_head(${pageTitle}, 'tag')"/>
    <link rel="stylesheet" th:href="@{/richtext/richtext.min.css}"/>
    <script th:src="@{/richtext/jquery.richtext.min.js}"></script>
</head>

<body>
<div class="container-fluid">
    <div th:replace="fragment_navigation :: menu">

    </div>
    <br/>
    <div class="text-center">
        <h2>Manage Products | [[${pageTitle}]]</h2>
    </div>

    <br/>

    <form th:action="@{/products/save}" method="post" onsubmit="return checkUnique(this)"
          enctype="multipart/form-data"
          th:object="${product}">
        <input type="hidden" th:field="*{productId}"/>
        <input type="hidden" id="enabled" th:field="*{enabled}"/>
        <input type="hidden" id="inStock" th:field="*{inStock}"/>
        <input th:if="${product.category != null}" type="hidden" id="categoryId" th:value="${product.category.categoryId}"/>

        <div>
            <div class="tabs">

                <input type="radio" id="tab1" name="tab-control" checked>
                <input type="radio" id="tab2" name="tab-control">
                <input type="radio" id="tab3" name="tab-control">
                <input type="radio" id="tab4" name="tab-control">
                <input type="radio" id="tab5" name="tab-control">
                <ul>
                    <li title="Overview">
                        <label for="tab1" role="button">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,2A8,8 0 0,0 6,10A8,8 0 0,0 14,18A8,8 0 0,0 22,10H20C20,13.32 17.32,16 14,16A6,6 0 0,1 8,10A6,6 0 0,1 14,4C14.43,4 14.86,4.05 15.27,4.14L16.88,2.54C15.96,2.18 15,2 14,2M20.59,3.58L14,10.17L11.62,7.79L10.21,9.21L14,13L22,5M4.93,5.82C3.08,7.34 2,9.61 2,12A8,8 0 0,0 10,20C10.64,20 11.27,19.92 11.88,19.77C10.12,19.38 8.5,18.5 7.17,17.29C5.22,16.25 4,14.21 4,12C4,11.7 4.03,11.41 4.07,11.11C4.03,10.74 4,10.37 4,10C4,8.56 4.32,7.13 4.93,5.82Z"/>
                            </svg>
                            <br>
                            <span>Overview</span>
                        </label>
                    </li>
                    <li title="Description">
                        <label for="tab2" role="button">
                            <svg viewBox="0 0 24 24">
                                <path d="M8.749,9.934c0,0.247-0.202,0.449-0.449,0.449H4.257c-0.247,0-0.449-0.202-0.449-0.449S4.01,9.484,4.257,9.484H8.3C8.547,9.484,8.749,9.687,8.749,9.934 M7.402,12.627H4.257c-0.247,0-0.449,0.202-0.449,0.449s0.202,0.449,0.449,0.449h3.145c0.247,0,0.449-0.202,0.449-0.449S7.648,12.627,7.402,12.627 M8.3,6.339H4.257c-0.247,0-0.449,0.202-0.449,0.449c0,0.247,0.202,0.449,0.449,0.449H8.3c0.247,0,0.449-0.202,0.449-0.449C8.749,6.541,8.547,6.339,8.3,6.339 M18.631,4.543v10.78c0,0.248-0.202,0.45-0.449,0.45H2.011c-0.247,0-0.449-0.202-0.449-0.45V4.543c0-0.247,0.202-0.449,0.449-0.449h16.17C18.429,4.094,18.631,4.296,18.631,4.543 M17.732,4.993H2.46v9.882h15.272V4.993z M16.371,13.078c0,0.247-0.202,0.449-0.449,0.449H9.646c-0.247,0-0.449-0.202-0.449-0.449c0-1.479,0.883-2.747,2.162-3.299c-0.434-0.418-0.714-1.008-0.714-1.642c0-1.197,0.997-2.246,2.133-2.246s2.134,1.049,2.134,2.246c0,0.634-0.28,1.224-0.714,1.642C15.475,10.331,16.371,11.6,16.371,13.078M11.542,8.137c0,0.622,0.539,1.348,1.235,1.348s1.235-0.726,1.235-1.348c0-0.622-0.539-1.348-1.235-1.348S11.542,7.515,11.542,8.137 M15.435,12.629c-0.214-1.273-1.323-2.246-2.657-2.246s-2.431,0.973-2.644,2.246H15.435z"></path>
                            </svg>
                            <br>
                            <span>Description</span>
                        </label>
                    </li>
                    <li title="Images">
                        <label for="tab3" role="button">
                            <svg viewBox="0 0 24 24">
                                <path d="M18.555,15.354V4.592c0-0.248-0.202-0.451-0.45-0.451H1.888c-0.248,0-0.451,0.203-0.451,0.451v10.808c0,0.559,0.751,0.451,0.451,0.451h16.217h0.005C18.793,15.851,18.478,14.814,18.555,15.354 M2.8,14.949l4.944-6.464l4.144,5.419c0.003,0.003,0.003,0.003,0.003,0.005l0.797,1.04H2.8z M13.822,14.949l-1.006-1.317l1.689-2.218l2.688,3.535H13.822z M17.654,14.064l-2.791-3.666c-0.181-0.237-0.535-0.237-0.716,0l-1.899,2.493l-4.146-5.42c-0.18-0.237-0.536-0.237-0.716,0l-5.047,6.598V5.042h15.316V14.064z M12.474,6.393c-0.869,0-1.577,0.707-1.577,1.576s0.708,1.576,1.577,1.576s1.577-0.707,1.577-1.576S13.343,6.393,12.474,6.393 M12.474,8.645c-0.371,0-0.676-0.304-0.676-0.676s0.305-0.676,0.676-0.676c0.372,0,0.676,0.304,0.676,0.676S12.846,8.645,12.474,8.645"></path>
                            </svg>
                            <br>
                            <span>Images</span>
                        </label>
                    </li>
                    <li title="Details">
                        <label for="tab4" role="button">
                            <svg viewBox="0 0 24 24">
                                <path d="M14,2A8,8 0 0,0 6,10A8,8 0 0,0 14,18A8,8 0 0,0 22,10H20C20,13.32 17.32,16 14,16A6,6 0 0,1 8,10A6,6 0 0,1 14,4C14.43,4 14.86,4.05 15.27,4.14L16.88,2.54C15.96,2.18 15,2 14,2M20.59,3.58L14,10.17L11.62,7.79L10.21,9.21L14,13L22,5M4.93,5.82C3.08,7.34 2,9.61 2,12A8,8 0 0,0 10,20C10.64,20 11.27,19.92 11.88,19.77C10.12,19.38 8.5,18.5 7.17,17.29C5.22,16.25 4,14.21 4,12C4,11.7 4.03,11.41 4.07,11.11C4.03,10.74 4,10.37 4,10C4,8.56 4.32,7.13 4.93,5.82Z"/>
                            </svg>
                            <br>
                            <span>Details</span>
                        </label>
                    </li>
                    <li title="Shipping">
                        <label for="tab5" role="button">
                            <svg viewBox="0 0 24 24">
                                <path d="M3,4A2,2 0 0,0 1,6V17H3A3,3 0 0,0 6,20A3,3 0 0,0 9,17H15A3,3 0 0,0 18,20A3,3 0 0,0 21,17H23V12L20,8H17V4M10,6L14,10L10,14V11H4V9H10M17,9.5H19.5L21.47,12H17M6,15.5A1.5,1.5 0 0,1 7.5,17A1.5,1.5 0 0,1 6,18.5A1.5,1.5 0 0,1 4.5,17A1.5,1.5 0 0,1 6,15.5M18,15.5A1.5,1.5 0 0,1 19.5,17A1.5,1.5 0 0,1 18,18.5A1.5,1.5 0 0,1 16.5,17A1.5,1.5 0 0,1 18,15.5Z" />
                            </svg>
                            <br>
                            <span>Shipping</span>
                        </label>
                    </li>
                </ul>
                <div class="slider">
                    <div class="indicator"></div>
                </div>
                <div class="content">
                    <section>
                        <h2>Overview</h2>
                        <div th:replace="products/fragment_product_overview :: content"></div>
                    </section>

                    <section>
                        <h2>Description</h2>
                        <th:block th:if="${!#authorization.expression('hasAuthority(''Admin'')') && !#authorization.expression('hasAuthority(''Editor'')')}">
                            <th:block th:if="${#authorization.expression('hasAuthority(''Salesperson'')')}">
                                <div th:replace="products/fragment_product_description_readonly :: content"></div>
                            </th:block>
                        </th:block>

                        <th:block th:if="${#authorization.expression('hasAuthority(''Admin'')') || #authorization.expression('hasAuthority(''Editor'')')}">
                        <div th:replace="products/fragment_product_description :: content"></div>
                        </th:block>
                    </section>

                    <section>
                        <h2>Images</h2>
                        <th:block th:if="${!#authorization.expression('hasAuthority(''Admin'')') && !#authorization.expression('hasAuthority(''Editor'')')}">
                            <th:block th:if="${#authorization.expression('hasAuthority(''Salesperson'')')}">
                                <div th:replace="products/fragment_product_images_readonly :: content"></div>
                            </th:block>
                        </th:block>

                        <th:block th:if="${#authorization.expression('hasAuthority(''Admin'')') || #authorization.expression('hasAuthority(''Editor'')')}">
                        <div th:replace="products/fragment_product_images :: content"></div>
                        </th:block>
                    </section>

                    <section>
                        <h2>Details</h2>
                        <th:block th:if="${!#authorization.expression('hasAuthority(''Admin'')') && !#authorization.expression('hasAuthority(''Editor'')')}">
                            <th:block th:if="${#authorization.expression('hasAuthority(''Salesperson'')')}">
                                <div th:replace="products/fragment_product_details_readonly :: content"></div>
                            </th:block>
                        </th:block>

                        <th:block th:if="${#authorization.expression('hasAuthority(''Admin'')') || #authorization.expression('hasAuthority(''Editor'')')}">
                        <div th:replace="products/fragment_product_details :: content"></div>
                        <br>
                        <div>
                            <input type="button" class="btn btn-blue" value="Add More Detail"
                                onclick="addNextDetailSection()" />
                        </div>
                        </th:block>
                    </section>

                    <section>
                        <h2>Shipping</h2>
                        <th:block th:if="${!#authorization.expression('hasAuthority(''Admin'')') && !#authorization.expression('hasAuthority(''Editor'')')}">
                            <th:block th:if="${#authorization.expression('hasAuthority(''Salesperson'')')}">
                                <div th:replace="products/fragment_product_shipping_readonly :: content"></div>
                            </th:block>
                        </th:block>

                        <th:block th:if="${#authorization.expression('hasAuthority(''Admin'')') || #authorization.expression('hasAuthority(''Editor'')')}">
                        <div th:replace="products/fragment_product_shipping :: content"></div>
                        </th:block>
                    </section>
                </div>
            </div>
            <div class="text-center">
                <input type="submit" value="Save" class="btn btn-blue m-3"/>
                <input type="button" value="Cancel" class="btn btn-grey" id="buttonCancel" />
            </div>
        </div>

    </form>

    <div th:replace="fragments_modal :: modal_dialog"></div>

    <div th:replace="fragments :: footer"></div>
</div>

<script type="text/javascript">
    moduleURL = "[[@{/products}]]";
    brandModuleURL = "[[@{/brands}]]";
    defaultImageThumbnailSrc = "[[@{/images/image-thumbnail.png}]]";
    checkUniqueUrl = "[[@{/products/check-unique}]]";

</script>
<script th:src="@{/js/common_form.js}"></script>
<script th:src="@{/js/product_form_overview.js}"></script>
<script th:src="@{/js/product_form_images.js}"></script>
<script th:src="@{/js/product_form_details.js}"></script>
</body>
</html>